<!DOCTYPE html>
<html>
<head>
    <title>Money Tracker</title>
</head>
<body>

<h2>Add Expense</h2>

<input id="title" placeholder="Title">
<input id="amount" placeholder="Amount">
<button onclick="addExpense()">Add</button>

<h2>Expenses</h2>
<ul id="list"></ul>

<script>
    async function load() {
      const res = await fetch("/expenses");
      const data = await res.json();

      const list = document.getElementById("list");
      list.innerHTML = "";

      data.forEach(e => {
        list.innerHTML += `
          <li>
            ${e.title} - ${e.amount}
            <button onclick="del(${e.id})">Delete</button>
          </li>
        `;
      });
    }

    async function addExpense() {
      await fetch("/expenses", {
        method:"POST",
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({
          title: title.value,
          amount: amount.value
        })
      });
      load();
    }

    async function del(id) {
      await fetch("/expenses/"+id,{method:"DELETE"});
      load();
    }

    load();
</script>

</body>
</html>
